/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/magic-grid@3.2.4/src/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{checkParams,getMin}from"./utils";class MagicGrid{constructor(t){checkParams(t),t.container instanceof HTMLElement?(this.container=t.container,this.containerClass=t.container.className):(this.containerClass=t.container,this.container=document.querySelector(t.container)),this.items=this.container.children,this.static=t.static||!1,this.size=t.items,this.gutter=t.gutter,this.maxColumns=t.maxColumns||!1,this.useMin=t.useMin||!1,this.useTransform=t.useTransform,this.animate=t.animate||!1,this.started=!1,this.init()}init(){if(this.ready()&&!this.started){this.container.style.position="relative";for(let t=0;t<this.items.length;t++){let i=this.items[t].style;i.position="absolute",this.animate&&(i.transition=(this.useTransform?"transform":"top, left")+" 0.2s ease")}this.started=!0}}colWidth(){return this.items[0].getBoundingClientRect().width+this.gutter}setup(){let t=this.container.getBoundingClientRect().width,i=this.colWidth(),e=Math.floor(t/i)||1,s=[];this.maxColumns&&e>this.maxColumns&&(e=this.maxColumns);for(let t=0;t<e;t++)s[t]={height:0,index:t};return{cols:s,wSpace:t-e*i+this.gutter}}nextCol(t,i){return this.useMin?getMin(t):t[i%t.length]}positionItems(){let{cols:t,wSpace:i}=this.setup(),e=0,s=this.colWidth();i=Math.floor(i/2);for(let n=0;n<this.items.length;n++){let h=this.nextCol(t,n),r=this.items[n],a=h.height?this.gutter:0,o=h.index*s+i+"px",l=h.height+a+"px";this.useTransform?r.style.transform=`translate(${o}, ${l})`:(r.style.top=l,r.style.left=o),h.height+=r.getBoundingClientRect().height+a,h.height>e&&(e=h.height)}this.container.style.height=e+"px"}ready(){return!!this.static||this.items.length>=this.size}getReady(){let t=setInterval((()=>{this.container=document.querySelector(this.containerClass),this.items=this.container.children,this.ready()&&(clearInterval(t),this.init(),this.listen())}),100)}listen(){if(this.ready()){let t;window.addEventListener("resize",(()=>{t||(t=setTimeout((()=>{this.positionItems(),t=null}),200))})),this.positionItems()}else this.getReady()}}export default MagicGrid;
//# sourceMappingURL=/sm/5c50bca9a7d527c1a5c066f5a33f5679a10f1010dc6decb89802fb8f4026c879.map